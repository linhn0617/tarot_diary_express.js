# 使用 Node.js 20 完整版
FROM node:20

# 設置工作目錄
WORKDIR /app

# 複製相依性定義
COPY package.json package-lock.json ./

# 安裝所有相依（包含 devDependencies）
RUN npm install

# 複製所有原始碼
COPY . .

# 設置環境變數
ENV NODE_ENV=development
ENV PORT=3000

# 曝露應用程式埠
EXPOSE 3000

# 啟動 dev 模式（ex: ts-node-dev）
CMD npm run dev
